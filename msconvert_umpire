run, = glob_wildcards("raw/{run}.raw")


rule all:
    input:
        expand("umpire_mzML/{run}.umpire.mzML", run=run)

rule thermorawfileparser
    input:
        raw = "raw/{run}.raw"
    output:
       mzML = "mzML/{run}.mzML"
    threads: 2
    shell:
        "mono ~/bin/ThermoRawFileParser/ThermoRawFileParser.exe -i {input.raw} -f 2 --output_file {output.mzML}"



rule msconvert_umpire:
    input:
        mzML="mzml/{run}.mzML"
    output:
        umpire="umpire_mzML/{run}.umpire.mzML"
    threads: 4
    shell:
        "/home/karlssoc/bin/msconvert {input.mzML} "
        "-c home/karlssoc/ms/msconvert/msconvert_umpire_mzML"
        "--outfile {output.umpire}"
